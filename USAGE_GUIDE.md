# Screenshot Extension 使用方法ガイド

## 📸 基本操作

### インストールと起動
1. **Chrome拡張の読み込み**
   - `chrome://extensions/` を開く
   - 「デベロッパーモード」を有効化
   - 「パッケージ化されていない拡張機能を読み込む」をクリック
   - プロジェクトフォルダを選択

2. **拡張機能の使用**
   - ツールバーの📷アイコンをクリック
   - 3つの撮影モードから選択

## 🎯 撮影モード詳細

### 1. 表示領域キャプチャ
**用途**: 現在のビューポートのみを撮影

**手順**:
1. 撮影したいページを表示
2. 拡張機能ポップアップで「Capture Visible Part」をクリック
3. 自動的にプレビューページが開く

**特徴**:
- ✅ 最速の撮影方法
- ✅ スクロールバーを除外
- ✅ デバイス倍率に対応

### 2. ページ全体キャプチャ  
**用途**: スクロールが必要な長いページの完全撮影

**手順**:
1. 撮影したいページを表示
2. 拡張機能ポップアップで「Capture Full Page」をクリック
3. 自動スクロール処理を待機（数秒～数十秒）
4. プレビューページで結果確認

**技術詳細**:
- 📄 自動的にページ高さを計算
- 🔄 ビューポート単位で分割撮影
- 🧩 複数画像を自動結合
- 🚫 固定・粘着要素を一時非表示

**注意事項**:
- 処理時間はページ長さに比例
- 動的コンテンツは撮影時の状態で固定
- 無限スクロールページでは予期しない結果になる可能性

### 3. 範囲選択キャプチャ
**用途**: 特定の要素や領域の精密撮影

**手順**:
1. 撮影したいページを表示
2. 拡張機能ポップアップで「Capture Area」をクリック
3. ページに半透明オーバーレイが表示
4. マウスドラッグで範囲を選択
5. マウスリリースで撮影実行

**操作方法**:
- 🖱️ **ドラッグ開始**: 左上角をクリック
- 🔲 **範囲調整**: ドラッグして右下角を決定
- ✅ **撮影実行**: マウスリリース
- ❌ **キャンセル**: ページリロード

## 💾 画像操作

### プレビューページ機能
撮影完了後、新しいタブでプレビューページが開きます。

#### ダウンロード機能
- **ボタン**: 「Download」
- **ファイル名形式**: `screenshot-{ページタイトル}-{日時}.png`
- **日時形式**: `YYYY-MM-DD_HH-MM-SS`
- **例**: `screenshot-Google検索-2024-12-17_14-30-45.png`

#### クリップボード機能
- **ボタン**: 「Copy to Clipboard」
- **対応形式**: PNG画像データ
- **使用API**: `navigator.clipboard.write()`
- **フィードバック**: 成功時「Copied!」表示（2秒間）

## 🔧 技術仕様

### 対応環境
- **ブラウザ**: Chrome 140以降
- **OS**: Windows, macOS, Linux
- **JavaScript**: ES2025準拠

### 画像仕様
- **形式**: PNG
- **品質**: ロスレス圧縮
- **解像度**: デバイス倍率対応（Retina等）
- **色深度**: 24bit RGB + Alpha

### パフォーマンス
- **表示領域**: ~0.5秒
- **ページ全体**: ページ高さに比例（通常1-10秒）
- **範囲選択**: ~1秒
- **メモリ使用**: 撮影後に自動解放

## 🚨 トラブルシューティング

### よくある問題

#### 1. 撮影が開始されない
**症状**: ボタンクリック後に反応がない

**解決方法**:
1. ページを更新
2. 拡張機能を再読み込み
3. Chromeを再起動

#### 2. 範囲選択が表示されない
**症状**: オーバーレイが出現しない

**原因**: 
- CSPポリシーによる制限
- 他の拡張機能との競合

**解決方法**:
1. 別のタブで試行
2. シークレットモードで試行
3. 他の拡張機能を一時無効化

#### 3. ダウンロードが開始されない
**症状**: ダウンロードボタンが機能しない

**確認事項**:
- Chromeのダウンロード設定
- ポップアップブロック設定
- ダウンロードフォルダの権限

#### 4. クリップボードコピーが失敗
**症状**: 「Failed to copy」エラー

**原因**:
- HTTPS要件（localhost除く）
- ブラウザ権限設定

**解決方法**:
1. HTTPSページで試行
2. Chromeの権限設定確認

## 🎨 使用例とベストプラクティス

### Webデザイナー向け
```
用途: レスポンシブデザイン検証
手順:
1. デスクトップビューで表示領域キャプチャ
2. 画面サイズ変更
3. 再度表示領域キャプチャ
4. 比較検証
```

### 開発者向け
```
用途: バグレポート作成
手順:
1. エラー発生ページで範囲選択キャプチャ
2. 問題箇所のみを精密撮影
3. クリップボードコピー
4. GitHubイシューに直接貼り付け
```

### QAテスター向け
```
用途: テスト結果記録
手順:
1. テスト対象ページで全体キャプチャ
2. 自動ダウンロード
3. ファイル名にテスト日時が含まれるため履歴管理が容易
```

## 🔒 プライバシーとセキュリティ

### データの取り扱い
- **ローカル処理**: 全ての画像処理はブラウザ内で実行
- **外部送信なし**: 撮影データは外部サーバーに送信されない
- **一時保存**: メモリ上の一時保存のみ、永続化なし

### 必要な権限
- `activeTab`: 現在のタブの撮影
- `scripting`: コンテンツスクリプト注入
- `offscreen`: 画像処理環境
- `tabs`: タブ管理

### セキュリティ機能
- 🛡️ 最小権限の原則
- 🔒 センシティブサイトでの自動無効化
- 🚫 悪意のあるスクリプト注入防止

## 📚 関連リソース

### 開発者向けドキュメント
- [API.md](API.md) - 内部API仕様
- [PROJECT_INDEX.md](PROJECT_INDEX.md) - プロジェクト構造

### 外部リンク
- [Chrome Extensions API](https://developer.chrome.com/docs/extensions/)
- [Canvas API Documentation](https://developer.mozilla.org/docs/Web/API/Canvas_API)
- [Clipboard API Guide](https://developer.mozilla.org/docs/Web/API/Clipboard_API)